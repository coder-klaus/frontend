## 读取文件

> 1. 读取文件要求，文件必须存在，不存在则直接报错
> 2. 默认读取到的是Buffer实例，本质是二进制数组
>    + 因为Node 不知道你读取的是 文本，而是图片这种二进制内容

### 同步读取

```js
import fs from 'node:fs';

// 同步读取文件
const data = fs.readFileSync('./data.txt');
// 默认读取到的结果是 Buffer 对象
console.log(data); // <Buffer 48 65 6c 6c 6f 20 57 6f 72 6c 64 0a 48 65 6c 6c 6f 20 57 6f 72 6c 64 31>

// 通过 Buffer 实例的 toString 方法，将 Buffer 对象转换为字符串
console.log(data.toString()); // Hello World

// 可以在调用时，指定编码，此时读取结果自动转换为字符串
console.log(fs.readFileSync('./data.txt', 'utf-8')); // Hello World
```



### 异步读取 - 回调

> 这种读取容易发生 回调地狱

```js
import fs from 'node:fs';

// 异步读取文件
// 1. 默认读取到的也是 Buffer 对象 => 解决方法 1. 通过 toString 方法转换为字符串 2. 指定编码
// 2. Node回调是错误优先的，第一个参数一定能是错误对象 => 如果没有错误，则err的值为null
fs.readFile('./data.txt', 'utf-8', (err, data) => {
  if (err) {
    console.log(err);
  } else {
    console.log(data);
  }
});
```



### 异步读取 - promise

```js
import fs from 'node:fs/promises';

// 1. 导入方式
//    + 从 fs.promises 中导入 => import fs from 'node:fs' + fs.promises.readFile
//    + 从 node:fs/promises 中导入 => import fs from 'node:fs/promises' + fs.readFile
// 2. node 中 ESM 模块顶层可以直接使用 await 关键字
const data = await fs.readFile('./data.txt', 'utf-8');

console.log(data);
```

