## require(x) 的三种用法

1. **内置模块**  
   直接写模块名，如 `require('path')`。Node.js 会优先查找并加载内置模块。

2. **自定义模块（文件或文件夹）**  
   以 `./`、`../` 或 `/` 开头的路径，如 `require('./utils')`。Node.js 会按照文件和目录的查找规则加载本地模块。

3. **第三方模块**  
   直接写第三方包名，如 `require('axios')`。Node.js 会在 `node_modules` 目录及其父级目录中查找。



## 查找自定义文件模块的流程

1. **当作文件查找**
   - 先找完全匹配的文件名 `x`
   - 没有则依次查找 `x.js`、`x.json`、`x.node`

2. **当作目录查找**
   - 如果 `x` 是目录，则依次查找  
     `x/index.js`、`x/index.json`、`x/index.node`

3. **全部找不到**
   - 报错：`Cannot find module`



## 查找第三方模块的流程

1. **是否为内置模块**
   - 如果是内置模块，直接加载。

2. **在 node_modules 中查找**
   - 先在当前目录下的 `node_modules/x` 文件夹查找
   - 如果有 `package.json`，优先加载 `main` 字段指定的文件
   - 没有则查找 `index.js`、`index.json`、`index.node`

3. **逐级向上查找**
   - 如果当前目录没有，继续到上一级目录的 `node_modules` 查找
   - 一直查到根目录为止

4. **仍未找到**
   - 报错：`Cannot find module`



## 实际开发说明

- 使用包管理工具（如 npm）安装的第三方模块，默认会放在项目根目录的 `node_modules` 目录下。
- `require` 可以省略 `.js` 和 `/index.js`，因为 Node.js 会自动补全并查找。
- Node.js 对已经加载的模块有缓存机制，重复 require 不会重复加载。



## node 前缀

在导入 Node.js 内置模块时，可以显式添加 `node:` 前缀，该用法同时适用于 CommonJS（CJS）和 ES Module（ESM）。

- 加上 `node:` 前缀后，**只会查找内置模块**，不会查找同名的第三方或本地模块。
- 如果对应的内置模块不存在，则会直接报错。
- 这样做的好处是**语义更清晰**，能够明确区分内置模块与可能存在的同名第三方模块，避免命名冲突和歧义。

```js
// 只会加载 Node.js 内置的 fs 模块
const fs = require('node:fs');
```

```js
import fs from 'node:fs';
```






