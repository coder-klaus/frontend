存在如下表结构

![image.png](https://s2.loli.net/2025/06/29/Onv3728Y1RHPrzT.png) 



此时如果更新 主表中被引用字段`id`， 此时会因为外键参照性约束被阻止修改

```sql
UPDATE customers SET id = 3 WHERE id = 2;
```

简单来说，默认情况下，从表外键，不会随着主表中对应被引用字段的更新而更新



外键参照性约束仅局限于被从表引用的字段值，如果值并没有被从表引用，则这个值可以被随意的更新和删除



外键参照性行为约束的行为由 `ON DELETE` 和 `ON UPDATE` 控制，决定主表记录被删除或更新时，子表如何处理。



`ON UPDATE` 和 `ON DELETE` 定义主表更新或删除时，子表的行为。常见选项有：

- `RESTRICT`：禁止更新或删除（默认）
- `NO ACTION`：和 `RESTRICT` 一样，`SQL` 标准定义规则，而`RESTRICT`是`MySQL`自己的规则
- `CASCADE`：主表 ID 更新，子表自动更新；主表记录删除，子表相关记录也删除
- `SET NULL`：主表记录更新或删除，子表对应字段设为 NULL => 前提是 brand_id 允许 NULL



外键的参照性约束要么在新建表设置外键的时候设置，要么只能删除原来的外键，然后重新设置

```sql
-- 先移除原本外键
ALTER TABLE orders DROP FOREIGN KEY orders_ibfk_1;
ALTER TABLE orders 
	ADD FOREIGN KEY (customer_id) REFERENCES customers(id) 
	ON UPDATE CASCADE ON DELETE CASCADE;
```

