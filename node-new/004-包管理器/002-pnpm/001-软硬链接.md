## 链接概述

在类 Unix 系统中，一切皆为文件，链接也被视为一种特殊文件。

链接主要分为以下两类：

1. **硬链接（Hard Link）**
   + 硬链接实际上是文件名，直接指向硬盘上的数据存储地址。

2. **软链接（符号链接 Symbolic Link）**
   + 软链接类似于快捷方式，它指向某个路径，再通过该路径访问实际数据。

![image.png](https://s2.loli.net/2025/07/08/e2B5c8SvsmHbfNq.png) 

> 无论是文件拷贝，还是软硬链接都只能针对文件进行操作，不能针对目录进行操作



### 文件拷贝

文件拷贝的本质在于数据的完全独立。 原文件与副本文件分别指向不同的数据块，因此修改其中一个不会影响另一个。 

```shell
# cp 是 copy 的简写
cp foo.txt foo_copy.txt
```

![image.png](https://s2.loli.net/2025/07/08/qCrg4U9ev27ldGP.png) 



### 硬链接

硬链接不会复制数据，而是让多个文件名共同指向同一个数据块。

硬链接的特点在于：修改任意一个文件，另一个也会发生变化，因为它们共享磁盘上的同一块数据。

```shell
# ln <旧文件> <新文件> => ln 是 link 的简写
ln foo.txt foo_hard.txt
```

![image.png](https://s2.loli.net/2025/07/08/aduz9LxhNwkXV4O.png) 

即使删除`foo.js`，仍可通过`foo_hard.js`访问文件内容。



### 软链接

软链接（符号链接）类似于快捷方式，它指向另一个路径，通过该路径读取实际数据资源。

```shell
ln -s foo.txt foo_soft.txt # -s 是 --soft
```

![image.png](https://s2.loli.net/2025/07/08/CXvMYcpeOBSjUq7.png) 

如果此时删除`foo.js`，`foo_soft.js`将无法使用，因为链接断开，无法找到实际数据。

![image.png](https://s2.loli.net/2025/07/08/e2MqA8iOSFs5l96.png) 

软链接通常会以小箭头显示以示区分

并且执行`ls -al`后控制台显示的内容如下

```shell
total 8
drwxr-xr-x    4 klaus  staff   128  7  8 16:36 .
drwxrwxr-x@ 101 klaus  staff  3232  7  8 16:23 ..
lrwxr-xr-x@   1 klaus  staff     7  7  8 16:36 foo_soft.txt -> foo.txt
-rw-r--r--@   1 klaus  staff    11  7  8 16:36 foo.txt
```



## 注意事项

1. 硬链接只能用于文件，不能用于目录

2. 软链接和文件拷贝都可作用于文件和目录

```shell
# -r 是 --recursion 的缩写，即递归复制
cp -r foo foo_copy
```

```shell
ln -s foo foo_soft
```



## linux目录说明

### ~

- `~` 代表**当前用户的主目录**（home 目录）
- 具体路径通常是`/home/<用户名>`，比如：
  - 用户 `alice`：`/home/alice`
  - 用户 `bob`：`/home/bob`
- **root 用户**的主目录是 `/root`，不是 `/home/root`。
- 使用
  - `~`：当前用户的 home 目录（如 `/home/yourname`）
  - `~用户名`：指定用户的 home 目录（如 `~root` 代表 `/root`，`~bob` 代表 `/home/bob`）



### 其它目录

+ `.`：当前目录
+ `..`：上一级目录
+ `/`：根目录（文件系统的顶层）
+ `/etc`：系统配置文件 
+ `/var`：可变数据（日志等）
+ `/tmp`：临时文件目录
+ `/usr`：用户相关的程序和数据 
+ `/bin`、`/sbin`、`/lib` 等：系统程序和库



#### 系统程序和库

| 目录    | 全称              | 说明                                                       |
| ------- | ----------------- | ---------------------------------------------------------- |
| `/bin`  | **binary**        | 存放最基本的、所有用户都能用的**二进制可执行文件**（命令） |
| `/sbin` | **system binary** | 存放**系统管理员**（如 root）用的二进制可执行文件          |
| `/lib`  | **library**       | 存放系统启动和基本命令运行所需的**共享库文件**（.so 文件） |



#### var

`var`的全称是`variable`，用于存放**经常变化的数据文件**（日志、缓存、邮件等）



#### tmp

存放系统的临时文件，同时`/var/tmp`也可以存放临时文件

| 目录       | 说明                                                         |
| ---------- | ------------------------------------------------------------ |
| `/tmp`     | 短期临时文件，重启后会清空                                   |
| `/var/tmp` | 长期临时文件，重启后不会被自动清空<br />系统会定期清理，比如保存 30 天 |



#### usr

早期`usr`代表的是`user`。但现在代表是`UNIX System Resource`



`/bin`、`/sbin` 和 `/lib` 目录不仅存在于根目录 `/` 下，在 `/usr` 目录下也有对应的 `/usr/bin`、`/usr/sbin` 和 `/usr/lib`。

+ `/bin`、`/sbin`、`/lib` 等目录放在根目录下，是为了确保系统启动和修复时，最基本的命令和库在挂载根分区后即可使用
+ `/usr/bin`、`/usr/sbin`、`/usr/lib` 提供更丰富的应用和库，通常在系统完全启动、所有分区挂载完成后可用

这种设计确保了系统的启动速度以及启动安全。

```shell
/
├── bin
├── sbin
├── lib
├── usr
│   ├── bin
│   ├── sbin
│   ├── lib
│   └── ...
├── ...
```

| 目录           | 说明                                                         |
| -------------- | ------------------------------------------------------------ |
| `/usr/bin`     | 普通用户命令                                                 |
| `/usr/sbin`    | 系统管理员命令                                               |
| `/usr/lib`     | 程序库文件                                                   |
| `/usr/include` | 开发用头文件                                                 |
| `/usr/local`   | 非通过包管理器方式安装的，全部用户可用的用户自定义安装软件   |
| `/usr/share`   | 架构无关的共享数据 「 如 操作手册，音频文件，字体文件等 」   |
| `/usr/src`     | 一些系统内核源码，方便高级用户进行内核模块编写、驱动编译等高级操作 |

+ `/usr/include`

  + `Liunx`是使用C语言为核心编写的系统

  + `/usr/include`中存放的就是系统使用到的一系列头文件

  + 其中包括了宏定义，共享的结构体，函数等相关内容

    + **宏**（macro）是用 `#define` 定义的**文本替换规则**
    + 宏只是在**预处理阶段**，把你写的标识符直接用定义的内容做文本替换

    ```shell
    #define PI 3.14
    double area = PI * r * r; // 实际编译前变成 double area = 3.14 * r * r;
    ```

    



#### etc

`/etc` 目录最初来源于“et cetera”（拉丁语，意为“等等”），最早用于存放各种杂项文件。

随着 UNIX 和 Linux 的发展，`/etc` 逐渐被专门用来存放系统的配置文件，成为整个系统的“中枢神经”，集中管理所有全局配置。

如今，`/etc` 并没有一个官方的全称，通常被理解为“配置文件目录”（configuration files）。

在权限方面，`/etc` 下的文件大多数只有 root 用户拥有读写权限，普通用户一般只有读取权限。

不过，部分涉及系统安全的敏感文件（如 `/etc/shadow`）只有 root 用户可以访问，普通用户无法读取。
