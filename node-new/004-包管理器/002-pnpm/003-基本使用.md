## 安装

```shell
# 安装
npm install -g pnpm

# 查看版本
pnpm --version
```



## 常用指令

| `pnpm` 命令                                               | `npm` 命令                 |
| --------------------------------------------------------- | -------------------------- |
| `pnpm init`                                               | `npm init -y`              |
| `pnpm install`                                            | `npm install`              |
| `pnpm install --production`                               | `npm install --production` |
| `pnpm add <pkg>`                                          | `npm install <pkg>`        |
| `pnpm remove <pkg>`                                       | `npm uninstall <pkg>`      |
| `pnpm run <cmd>` 「 无论`<cmd>`是什么，`run`都可以省略 」 | `npm run <cmd>`            |
| `pnpm dlx <pkg>`                                          | `npx <pkg>`                |

>注意，在 `npm` 和 `pnpm` 中
>
>1. `npm install <pkg>` <=> `pnpm add <pkg>`
>2. `npm install <pkg>` <=> `pnpm remove <pkg>`



### `pnpm store path`

由于硬链接无法跨磁盘工作，`pnpm` 会在每个磁盘上为项目创建独立的 `store` 目录，以保证硬链接的有效性

因此，如果你的项目分布在不同磁盘上，每个磁盘都会有自己的 `pnpm store`。

此时，可以通过执行 `pnpm store path` 命令，查看当前项目实际使用的 `pnpm store` 目录位置。



### `pnpm store prune`

即使你删除了项目的 `node_modules`，依赖包的真实内容依然保留在 `pnpm store` 目录中。随着时间推移，未被使用的依赖会在 `pnpm store` 中不断积累，导致空间占用增加。

此时，可以通过执行 `pnpm store prune` 命令，清理掉 `pnpm store` 中未被任何项目引用的依赖包，从而释放空间。



### pnpm link

```shell
# 在需要调试的库中 「 假设该库叫 foo 」
pnpm link --global

# 在测试项目中
pnpm link foo
```

```shell
# 在测试库中解除链接
pnpm unlink foo

# 调试库解除链接
pnpm link --global --remove
```

```shell
# 也可以通过相对路径链接库进行调试
# 链接后，默认包名就是package.json中的name属性值
pnpm link <调试库的相对路径地址>

# 解除
pnpm unlink <调试库的相对路径地址 | 包名>
```

