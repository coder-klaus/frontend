`fs` 模块是 Node.js 的内置模块，全称为 `File System`（文件系统），主要用于操作系统中的文件和目录。

`node`中的`fs`模块提供了三种调用方式

+ 同步调用
+ 异步调用
  + 回调函数版本
  + promise版本



## 同步调用

```js
import fs from 'node:fs';

const data = fs.readFileSync('data.txt', 'utf8');

console.log(data); // Hello World
```



## 异步回调

### 回调函数版本

> 容易产生回调地狱

```js
import fs from 'node:fs';

// node 回调是异步优先的
// 1. 无论那个模块中的回调，第一个参数都是错误对象
// 2. 如果不存在错误，则err的值是null
fs.readFile('data.txt', 'utf8', (err, data) => {
  if (err) {
    console.error(err);
  } else {
    console.log(data);
  }
});
```



### promise版本

> 最为推荐的方式

```js
// 异步调用 要引入 promises 子模块
import fs from 'node:fs/promises';

// 在Node中使用ESM模块，顶层可以直接使用await
const data = await fs.readFile('data.txt', 'utf8');

console.log(data); // Hello World
```



## 具名导出

> Node.js 的内置模块（如 `fs`、`path`、`os` 等）在通过ESM模块规范导入时，不仅支持默认导入，也支持具名导入
>
> 这条规则不仅适用于 `fs` 模块，也适用于绝大多数 Node.js 内置模块

```js
import { readFileSync } from 'node:fs';

const data = readFileSync('data.txt', 'utf8');

console.log(data); // Hello World
```

```js
import { readFile } from 'node:fs';

readFile('data.txt', 'utf8', (err, data) => {
  if (err) {
    console.error(err);
  } else {
    console.log(data);
  }
});
```

```js
import { readFile } from 'node:fs/promises';

const data = await readFile('data.txt', 'utf8');

console.log(data); // Hello World
```

