```js
import { EventEmitter } from 'events'

const emitter = new EventEmitter()

emitter.on('customEvent1', () => { console.log('customEvent1') })
emitter.on('customEvent1', () => { console.log('customEvent1') })
emitter.on('customEvent2', () => { console.log('customEvent2') })
emitter.on('customEvent3', () => { console.log('customEvent3') })

// 获取所有注册的事件名
console.log(emitter.eventNames()) // [ 'customEvent1', 'customEvent2', 'customEvent3' ]

// 获取某个事件绑定的回调函数个数
console.log(emitter.listenerCount('customEvent1')) // 2

// 获取某个事件绑定的所有回调函数 「 会被整合为数组格式，随后被依次回调 」
console.log(emitter.listeners('customEvent1')) 
// [ [Function (anonymous)], [Function (anonymous)] ]
```



```js
import { EventEmitter } from 'events'

const emitter = new EventEmitter()

// 事件只触发一次，执行完毕后会被自动 off
emitter.once('customEvent', () => { console.log('handler1') })

// 回调只会被执行一次
emitter.emit('customEvent')
emitter.emit('customEvent')
```



```js
import { EventEmitter } from 'events'

const emitter = new EventEmitter()

emitter.on('customEvent', () => { console.log('handler1') })

// 默认整合为回调数组时，是向后插入，即push
// prependListener 使用的是 向前插入 即shift
emitter.prependListener('customEvent', () => console.log('handler2'))

emitter.emit('customEvent')
/*
  handler2
  handler1
*/
```



```js
import { EventEmitter } from 'events'

const emitter = new EventEmitter()

emitter.on('customEvent', () => { console.log('handler1') })

// 向前插入，并只执行一次
emitter.prependOnceListener('customEvent', () => console.log('handler2'))

emitter.emit('customEvent')
/*
  handler2
  handler1
*/

emitter.emit('customEvent')
// handler1
```



```js
import { EventEmitter } from 'events'

const emitter = new EventEmitter()

// 同一个事件最多可以绑定多少个对应回调函数 => 默认是10个
console.log(emitter.getMaxListeners()) // 10

// 手动修改限制个数
emitter.setMaxListeners(2)

// 超出限制，出现警告⚠️，并不阻止添加和对应事件的触发
emitter.on('event', () => console.log('event1'))
emitter.on('event', () => console.log('event2'))
emitter.on('event', () => console.log('event3'))

emitter.emit('event')
```

