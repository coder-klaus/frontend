通过 `ctx.body` 返回响应数据

`ctx.body` 会自动根据设置的值设置对应`Content-Type`响应头



## 返回字符串

```js
import Koa from 'koa'

const app = new Koa()

app.use((ctx, next) => {
  // 返回字符串类型值
  // 自动设置 Content-Type: text/html; charset=utf-8
  ctx.body = 'hello world'
})

app.listen(3000)
```



## 返回Buffer

```js
import Koa from 'koa'

const app = new Koa()

app.use((ctx, next) => {
  // 返回二进制数据
  // Koa 会自动设置 Content-Type: application/octet-stream
  // application/octet-stream 表示通用的二进制流数据，具体类型未知 => 以 8位 为传输单位的 字节流
  // 这意味着数据可能是图片、视频、音频、压缩包、文本、可执行文件等任意格式
  // 浏览器遇到该 Content-Type 时，通常会触发下载行为，因为无法直接解析显示
  // Postman遇到该 Content-Type 时，会将其作为普通文本，并使用 utf-8进行解码
  ctx.body = Buffer.from('hello world')
})

app.listen(3000)
```



```js
import Koa from 'koa'
import fs from 'node:fs/promises'

const app = new Koa()

app.use(async (ctx, next) => {
  const res = await fs.readFile('./uploads/test.jpg')
  // ctx.type = 'xxx' 是 ctx.set('Content-Type', xxx) 的简写形式
  // 通过设置响应的 MIME 类型，让浏览器能够正确识别资源类型
  // 如果类型设置正确且浏览器能解析，则会直接显示资源
  // 如果类型设置不正确或浏览器无法解析，则通常会自动下载该资源
  ctx.type = 'image/jpeg'
  ctx.body = res
})

app.listen(3000)
```



## 返回 对象或数组

```js
import Koa from 'koa'

const app = new Koa()

app.use(async (ctx, next) => {
  // 自动解析为 JSON 格式
  // 自动设置响应头 Content-Type: application/json; charset=utf-8
  ctx.body = {
    code: 200,
    message: 'success',
    data: {
      name: '张三',
      age: 18,
      gender: '男',
    },
  }
})

app.listen(3000)
```

```js
import Koa from 'koa'

const app = new Koa()

app.use(async (ctx, next) => {
  // 默认情况下，Koa只要返回成功，就会设置 响应码为 200
  // 但有时候，我们需要自己去设置更具体的响应码
  ctx.status = 201 // 201 表示 创建成功 Created
  ctx.body = {
    name: '张三',
    age: 18,
    gender: '男',
  }
})

app.listen(3000)
```



## 什么都不返回

```js
import Koa from 'koa'

const app = new Koa()

app.use(async (ctx, next) => {
  // 设置 null，表示什么都不返回
  // 会自动设置响应码为 204 No Content
  ctx.body = null
})

app.listen(3000)
```

