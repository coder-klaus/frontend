## 简介

数据库是一个专门用于管理的数据的软件

一般安装并运行在服务器,是一个没有UI界面的软件

我们可以通过 代码或命令行 使用其提供的 API 或 语句 和其进行交互



### GUI

命令行交互存在很多问题

+ 换行不方便
+ 不支持缩进
+ 代码没有高亮
+ 没有代码自动补全
+ 查询出的数据展示不够直观
+ 编写的SQL语句无法保存，无法进行复用

因此实际开发过程中，我们可以通过一些可视化工具「 如 Navicat、SQLyog、TablePlus 」 和 数据库软件进行交互

+ Navicat 支持绝大多数 关系型数据库，非关系型数据库 和 云数据库 但需要收费
  + 有些操作执行后，Navicat可能并没有得到及时的刷新，此时可以
    + 右键数据库或数据表，选择 刷新 页签
    + 关闭查询，再重新打开查询标签页 => 以获取更好的自定义标识提示

+ SQLyog 仅支持 MySQL 数据库 但免费
+ VSCode 等 IDE 也存在一些IDE插件，方便我们以可视化的形式进行数据库操作



### 数据库分类

数据库主要分为两大类

+ SQL => 关系型数据库
  + 代表: MySQL, PostgreSQL, Oracle, SQL Server
  + 数据以表的形式存储，底层使用B+树进行存储
  + 操作方式是通过 SQL 语句 「 Structured Query Language 结构化查询语言 」
  + 可以将数据表中重复数据单独抽离为一个表后，再通过外键将两个表关联起来
  + 支持事务，存储过程，触发器等高级操作
+ NoSQL => 非关系型数据库
  + NoSQL 是 Not Only SQL 的缩写，意为不仅仅是SQL
  + 代表: MongoDB, Redis
  + 不同NoSQL数据库的底层存储结构不同，例如文档型数据库MongoDB使用B树，内存型数据库Redis使用跳表
  + 不同NoSQL数据库的查询方式不同，例如MongoDB使用方法，Redis使用Key-Value
  + NoSQL的优势是灵活方便，可以直接将数据进行存储，不需要事先定义表结构
  + NoSQL 的劣势是
    + 直接存数据，没有主键，外键的说法，所以查询性能相对较低
    + 不存在事务，存储过程，触发器等高级操作
    + 没有外键，所以数据表中存在大量重复数据，冗余较高

一般在实际开中
 + 对于需要进行持久化永久存储的，使用SQL数据库
 + 对于需要读取频繁的缓存 或者 爬虫抓取的临时数据 使用NoSQL数据库



#### 事务

事务: 多条SQL语句组成一个执行单元，一个执行单元中的多条SQL语句要么都执行，要么都不执行

事务的四大特性: 原子性，隔离性，持久性，一致性  「 即 ACID, 全称为 Atomicity, Consistency, Isolation, Durability 」

+ 事务是原子性的，要么都执行成功，要么都执行失败，如果执行失败，则回滚到执行前的状态
+ 事务是隔离性的，一个事务的执行不能被其他事务干扰
+ 事务是持久性的，一个事务一旦提交，其结果将永久保存到数据库中
+ 事务是一致性的，即执行事务前数据库是合法的；事务执行后，数据库也必须是合法的
  + 如果事务所有的 SQL语句全部执行完毕，但事务结果是错误的，也会整体回滚



## SQL 分类

> 数据库语句只有在语法错误时，才会报错
>
> 如果语法正确，但逻辑错误，不会报错，但数据不会被修改 「 即静默失效 」

| 类型 | 中文名称     | 英文全称                     | 主要用途                         |
| ---- | ------------ | ---------------------------- | -------------------------------- |
| DDL  | 数据定义语言 | Data Definition Language     | 定义数据库和数据表的结构         |
| DML  | 数据操作语言 | Data Manipulation Language   | 操作数据库中的数据（增、删、改） |
| DQL  | 数据查询语言 | Data Query Language          | 查询数据库中的数据               |
| DCL  | 数据控制语言 | Data Control Language        | 控制数据库的访问权限             |
| TCL  | 事务控制语言 | Transaction Control Language | 控制事务的执行                   |



## 关系型数据库层次结构
+ 关系型数据库软件中，可以存在多个数据库
+ 每个数据库中可以存在多个数据表
+ 每个数据表中可以存在多条记录
+ 每条记录中可以存在多个字段



## SQL的语法规则
+ 每一条SQL语句都必须以分号结尾
  + SQL可以换行编写, 直到遇到分号为止
  + 多条SQL中，最后一条SQL语句可以不加分号「 不推荐 」
+ SQL语句不区分大小写
   + SQL关键字推荐使用大写
   + SQL自定义标识符推荐使用小写
+ 自定义标识推荐使用反引号进行包裹
  + 如果自定义标识是普通标识，反引号可以省略
  + 但如果自定义标识是关键字「 如`table`等 」 或 非法标识符「 如`123`、`user name`、`user-name`等 」，则必须使用反引号包裹
    + 因此推荐SQL中所有自定义标识符都使用下划线命名法
    + 并且任何自定义标识符都使用反引号包裹是个非常好的习惯

> 不同版本的SQL数据库在语法上存在差异，但大体上都是相同的



### 命名推荐

可以使用 特殊前缀或后缀 来标识是是数据库还是数据表，以提高语义化

+ `music_db` => 使用 `db`后缀标识是数据库
+ `t_user` => 使用 `t_`前缀标识是数据表



## 注释

+ 单行注释 => 快捷键 `Command + /`
  + 使用`--`表示单行注释
    - `--`后需要添加一个空格
    - `--` 是 SQL 标准注释符号
  + 使用`#`表示单行注释
    - `#` 是 MySQL 特有的注释符号
+ 多行注释 => 没有快捷键
  + 使用`/*  */`表示多行注释
    - `/*  */` 是 SQL 标准注释符号



## 数据类型分类

### 结构化数据

1. 每条数据都有严格的类型和结构约束。
2. 每条记录的基本含义一致。
3. 通常可以用表格形式展示。
4. **常见于关系型数据库**（如MySQL、Oracle、SQL Server等）。

| 用户ID | 姓名 | 年龄 | 注册时间         |
| ------ | ---- | ---- | ---------------- |
| 1001   | 张三 | 25   | 2024-07-01 10:00 |
| 1002   | 李四 | 31   | 2024-07-01 10:05 |



### 半结构化数据

1. 以 `key-value` 形式存储。
2. 每条记录的数据格式可以不同。
3. 常见于 JSON、XML、YAML 等文档格式，以及 NoSQL 数据库（如 MongoDB）。

```json
{
  "userId": 1001,
  "name": "张三",
  "interests": ["足球", "音乐"],
  "profile": {
    "age": 25,
    "city": "上海"
  }
}
```



### 非结构化数据

非结构化数据**没有固定的组织形式**，内容杂乱，难以用表格或标签描述。

**常见于文本、图片、音频、视频等**。

推荐使用对象存储系统对非结构化数据进行存储和管理。



#### 对象存储

为每个非结构化数据生成唯一的 `key`。

该 `key` 关联对应的非结构化数据及其元数据信息。

可通过 `key` 直接定位并进行相应的 CRUD 操作。