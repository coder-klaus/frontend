GROUP BY 就是把查出来的数据按照某种规则分成几组

默认情况下，会将查询结果整体看成一组后再运行聚合函数

```sql
-- 查询华为手机，并将结果作为整体「 一组 」后再统计条数
SELECT COUNT(*) FROM products WHERE brand = '华为';
```



GROUP BY 的作用是先把数据分组，然后对每组数据用聚合函数算结果。

因此 GROUP BY 通常跟聚合函数一起用，因为它是为了对分组后的数据做统计，普通查询一般不用 GROUP BY。

简单来说，只要涉及到聚合函数并且需要按某字段分组，就得用 GROUP BY。

```sql
-- 查询一共有多少品牌
SELECT brand
FROM products
GROUP BY brand;
```

```sql
-- 查询每个品牌的最高价格、最低价格、平均价格、平均评分
SELECT brand, MAX(price), MIN(price), ROUND(AVG(price), 2), ROUND(AVG(score), 2)
FROM products
GROUP BY brand;
```

```sql
-- 查询价格对1000 且 平均分大于 7 的手机的品牌，平均价格 和 平均分
SELECT brand, AVG(price), AVG(score)
FROM products
-- where 用于 对原始数据添加筛选条件
WHERE price > 1000
-- 分组
GROUP BY brand
-- HAVING 用于对分组后的数据添加筛选条件 => 一般用于聚合函数上
HAVING AVG(score) > 7;
```
