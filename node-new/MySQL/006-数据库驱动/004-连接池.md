`mysql2.createConnection` 只能创建一个单独的数据库连接。如果有多个客户端同时发起请求，单个连接可能会被占用，导致其他请求需要等待。

为了解决这个问题，`mysql2` 提供了**连接池**（Connection Pool）功能。连接池本质上是维护了一组可复用的数据库连接（比如 connection1、connection2、connection3 等），就像一个“池子”一样。每当有请求到来时，连接池会自动分配一个空闲连接，执行完 SQL 操作后，这个连接会被归还到池中，供后续请求复用。

连接池自动管理连接的创建、分配和回收，无需手动操作。相比每次请求都新建或只用单一连接的方式，连接池能显著提升并发处理能力和资源利用率，是实际生产环境中的推荐做法。



```js
import mysql from 'mysql2';

// 我们只要将 createConnection 方法替换为 createPool 就可以使用 mysql2提供的连接池
// 后续使用方式和使用单个连接池完全一致，因为createPool方法会返回当前连接池中一个可用的空闲连接
const pool = mysql.createPool({
  host: 'localhost',
  user: 'root',
  password: 'P@ssw0rd',
  database: 'demo_db',
  connectionLimit: 10 // 设置连接池中可以创建的最大连接数 「 默认是10 」
})

const statement = 'SELECT * FROM orders WHERE amount >= ?;';

pool.execute(statement, [2000], (err, results) => {
  console.log('results', results);
})

// 不能直接在这里执行连接池的end方法，因为
// + 单连接 => connection.end()：会等所有挂起的查询完成后再关闭连接
// + 连接池 => pool.end()：会立即关闭连接池中所有连接，并停止连接池中所有查询
// 不过在实际开发中，服务一般是常驻内存的，所以连接池一般也不需要关闭
// pool.end();
```

