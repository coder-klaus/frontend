当我们每次创建一个 `Buffer` 实例时，**Node 并不会每次都直接向操作系统申请内存**。

如果每次创建小的 Buffer（比如8字节、4字节、1字节、100字节）都去操作系统申请内存，那会严重影响性能。

底层实现里，其实是 Node 先通过系统调用申请一块较大的内存区域「 内存池 」，比如一次申请 **8KB（8 × 1024 字节）**，然后这些 Buffer 从中分配一部分来使用，避免频繁申请系统内存

这样只需向系统申请一次，就可以支撑多个小 Buffer，避免频繁系统调用，从而提升了运行效率。

```js
// 下面这些调用看似分别申请不同大小的内存
const buf1 = Buffer.alloc(8);   // 申请 8 字节
const buf2 = Buffer.alloc(4);   // 申请 4 字节
const buf3 = Buffer.alloc(1);   // 申请 1 字节
const buf4 = Buffer.alloc(100); // 申请 100 字节

// 实际上，底层 Node 会一次性申请一整块 8KB 内存
// 然后这些 Buffer 从中分配一部分来使用，避免频繁申请系统内存
```



内存池分配逻辑：

- 若内存池剩余空间足够，直接分配所需区域。
- 若空间不足，Node 自动扩容，申请新的 8KB 内存池。
- 若创建的 `Buffer` 大于 4KB，Node 放弃内存池，直接向操作系统申请对应大小的内存。

通过内存池机制，Node 减少系统调用，提升运行效率。



