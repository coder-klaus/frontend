## nodemon 

通过`node`指令允许脚本，并不会实时监听文件的改变，这就导致了每次修改脚本后需要停止之前的服务，然后再重新启动

`nodemon` 是 `node monitor` 的缩写，意思是“Node的监视器”。其使用方式和`node`指令完全一致。

只不过它会监听你的文件变动，一旦有改动，就自重启对应服务，非常适合开发环境使用。

```shell
nodemon <script>  # 启动node脚本

nodemon --inspect <script> # 启动node脚本，并开启调试模式
```



## pm2

`node` 和 `nodemon` 运行对应node脚本的时候，对应命令行必须一直开启。如果关闭，对应运行指令也会停止

`pm2`可以让 node运行的脚本 以后台进程的方式运行。此时就算关闭了命令行界面，node服务依旧存在

同时 pm2 可以配置集群模式，以实现负载均衡的功能

+ 集群是行多个 Node.js 进程（实例），每个进程运行相同的脚本。

+ 负载均衡是自动判断集群中的多个进程，那个较为空闲就把任务交给那个进行执行，从而减少服务器压力

+ `pm2` 是通过 node的内置模块 `cluster` 来实现集群功能的

  + 其中 每一个集群实例，我们可以称之为 worker

  + 不过 pm2 使用 cluster 实现的是简单集群

    在生产环境中，更多的还是借助云来实现功能更全面，性能更高效的集群

+ 此外，还有自动扩缩容，即请求多的时候自动创建更多的集群实例。请求少的时候，消耗不会多余的集群实例

  不过 pm2 并不支持 自动扩缩容功能，需要借助其它工具来实现，如 Kubernetes

```shell
# 启动一个 Node.js 脚本。
pm2 start <script> 

# 以 pm2 运行 node脚本 并开启 node的调试模式
pm2 start <script> --node-args="--inspect"

# 以集群模式启动，指定 worker 数量（-i 表示实例数，0 表示根据 CPU 核心数自动分配）。
pm2 start <script> -i <number>

# 为进程指定名称，便于管理。
pm2 start <script> --name <name>

# 停止指定进程 
# 可以通过进程名（app_name）、进程 ID（id）或脚本路径（script）找到并操作对应进程
pm2 stop <app_name|id|script>

# 重启指定进程
pm2 restart <app_name|id|script>

# 删除指定进程
pm2 delete <app_name|id|script>

# 停止所有进程
pm2 stop all

# 重启所有进程
pm2 restart all

# 删除所有进程
pm2 delete all

# 以表格形式 查看所有的 pm2 node进程
pm2 list

# 查看指定进程的相关信息
pm2 show <app_name|id|script>
```



## 接口测试工具

通过浏览器只能测试`get`请求，其余请求如果需要模拟必须编写额外逻辑

并且浏览器默认会请求 `index.html`的同时请求`favicon.ico`，这就导致了 `createServer`的回调会被默认执行两次



为了解决这个问题，我们可以使用接口测试工具在进行接口调试。

+ 常见的有 postman、Insomnia 等
+ 接口测试工具本质也是一种 特殊的客户端