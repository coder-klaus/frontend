`Axios` 既可以在浏览器中使用，也可以在 Node.js 环境中使用

+ 客户端 基于 `XMLHttpRequest`
+ Node 基于 `http`模块

```js
import http from 'node:http'

// 发送GET请求，res是可读流实例
// http.get 是 http.request的简写方式
// 除了get外，其余请求方式都通过 request 方法请求
http.get('http://localhost:3000/users', (res) => {
  let data = ''

  // 设置编码为utf-8，防止中文乱码
  // 可读流没有setEncoding方法，setEncoding是http模块的response对象的方法
  res.setEncoding('utf-8')

  // 监听'data'事件，接收数据块
  // + 默认情况下，data事件会接收到的数据是Buffer对象
  // + 如果需要接收到的数据是字符串，则需要设置编码为utf-8
  res.on('data', (chunk) => {
    data += chunk
  })

  // 监听'end'事件，数据接收完毕
  res.on('end', () => {
    try {
      const users = JSON.parse(data)
      console.log('用户列表：', users)
    } catch (err) {
      console.error('解析JSON失败：', err)
    }
  })
})
```

```js
import http from 'node:http'

// const 请求流「 是一个 可写流 」 = http.request(<请求配置>, <回调函数>)
// 回调函数参数 res 是 响应流 「 是一个 可读流 」
const req = http.request({
  // 请求方法 => 默认是GET 不区分大小写
  method: 'POST',
  // 请求协议 => 默认是http
  protocol: 'http:',
  // 请求主机 => 默认是localhost
  hostname: 'localhost',
  // 请求端口 => 默认是80
  port: 3000,
  // 请求路径 => 默认是/
  path: '/users'
}, (res) => {
  let data = ''

  res.on('data', (chunk) => {
    data += chunk
  })

  res.on('end', () => {
    console.log(JSON.parse(data))
  })
})

// 设置 请求体
req.write(JSON.stringify({ name: '张三', age: 20 }))

// 关闭请求流，才是真正发送请求
req.end()
```



## RESTful API 

RESTful API 是一种以资源为核心的 API 设计风格，每个资源对应一个唯一的 URL。

通过标准的 HTTP 方法（如 GET、POST、PUT、DELETE、PATCH 等）进行操作。

RESTful API 遵循无状态性原则，每一次 HTTP 请求都是独立的，不依赖于服务器端保存的上下文信息。

| 请求方式 | 功能描述                     |
| -------- | ---------------------------- |
| GET      | 查询资源（获取数据）         |
| POST     | 新建资源（创建数据）         |
| PUT      | 全量更新资源（整体替换）     |
| PATCH    | 局部更新资源（部分修改）     |
| DELETE   | 删除资源                     |
| HEAD     | 获取资源元数据（不返回body） |
| OPTIONS  | CORS 预检请求                |
| TRACE    | 回显收到的请求（诊断和调试） |
| CONNECT  | 建立隧道（如SSL加密等）      |



## 预检请求

满足如下条件的就是 **简单请求**

- 请求方法是 `GET`、`HEAD` 或 `POST`
- 请求头只包含：
  - `Accept`
  - `Accept-Language`
  - `Content-Language`
  - `Content-Type`「 不包含`application/json` 」：
    - `application/x-www-form-urlencoded`
    - `multipart/form-data`
    - `text/plain`
- 没有自定义头（如 `X-Token`、`Authorization` 等）

除此之外的所有请求都是 **非简单请求**



在请求 CORS（跨域资源共享）资源时，所有非简单请求在正式发送前，浏览器会自动发起一次预检请求（即 `OPTIONS` 请求），用于探测服务器是否允许该跨域请求。

`OPTIONS` 请求只返回响应头，浏览器会根据 `Access-Control-Allow-Origin` 判断当前域名是否被允许访问该资源：

- 若不允许，直接抛出跨域错误
- 若允许，才会继续发送实际请求获取资源



对于简单请求，浏览器会直接发送实际请求，收到完整响应后再判断是否允许访问：

- 若不允许，直接抛出跨域错误
- 若允许，才能访问响应数据



如果请求的是同源资源，即使是非简单请求，也不会触发预检请求。

