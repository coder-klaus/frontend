数据库（DataBase）是一个高效存储和管理海量数据的软件，安装在电脑或服务器上，通常无可视化界面，需通过SQL（结构化查询语言）或NoSQL接口操作。「 我们也可以通过一些第三方可视化界面来实现可视化操作，如`Navicat`、`sqlyog`等 」



数据库分两类：**关系型数据库**和**非关系型数据库**。

- **关系型数据库**（如MySQL、Oracle、DB2、SQL Server、SQLite）：
  - 以二维表格存储数据，表间通过外键（foreign key）建立关联，每条记录由主键（primary key）唯一标识。
  - 通话 结构化查询语句 SQL 来操作数据和数据库

- **非关系型数据库**（如MongoDB、Redis）：
  - 存储方式灵活，常以集合（类似数组）管理JSON对象数据，无需建表。
  - 通过方法「 MongoDB 」或指令『 redis 』等来操作数据和数据库




一台服务器可安装多个数据库软件，每个软件可创建多个数据库，每个数据库可包含多张表或集合。

在**关系型数据库**中，使用表来存储具体数据，表类似Excel表格，每行是一条记录，每列是一个字段。表间通过外键关联。

**非关系型数据库**（NoSQL，意为“Not Only SQL”）数据不在以二维表的形式进行存储。因此NoSQL存储数据形式更为灵活，不同类型的NoSQL存储方式不一样

+ 文档型NoSQL「 MongoDB 」使用JSON进行存储
+ 键值型NoSQL 「 Redis 」使用键值对进行存储 「 其中值可以是Redis中的任意数据类型 」

虽然NoSQL对数据的CRUD依旧十分高效，但其没有SQL中的主外键。因此一些数据会被重复定义，造成数据冗余。

**总结**：关系型数据库适合复杂数据管理，常用作永久存储；非关系型数据库适合快速存取简单数据，常用于数据缓存。

> 这里以 MySQL 为主进行讲解。



MySQL是一个关系型数据库，本质就是一款软件

+ 这个程序中管理着多个数据库

+ 每个数据库中可以有多张表

  + 表和表之间通过“外键”关联起来，避免了公共数据的重复定义

+ 每个表中可以有多条数据

  + 每张表包含多条数据，由多个字段组成 「 每一个数据项 」
  + 每行代表一条记录，存储具体内容。
  + 每条记录都有一个唯一标识，称为主键。

+ 一般情况下，我们存放数据的那个无UI软件被称之为 数据库服务器

  而我们通过SQL 或 NOSQL 去操作数据的软件 叫 数据库客户端

+ MySQL以服务形式运行，默认端口号为 `3306`

+ 一般数据库的管理员账号都叫做 `root`



## 分类

操作数据库的流程是：用SQL写语句，通过代码传给数据库执行

SQL语句可以分为如下几类：

| 分类 | 全称                         | 主要作用           | 常见语句                              |
| ---- | ---------------------------- | ------------------ | ------------------------------------- |
| DDL  | Data Definition Language     | 定义/修改结构      | CREATE, ALTER, DROP, TRUNCATE, RENAME |
| DQL  | Data Query Language          | 查询数据           | SELECT                                |
| DML  | Data Manipulation Language   | 操作数据（增删改） | INSERT, UPDATE, DELETE                |
| DCL  | Data Control Language        | 权限控制           | GRANT, REVOKE                         |
| TCL  | Transaction Control Language | 事务控制           | COMMIT, ROLLBACK, SAVEPOINT           |

在数据库中，**事务（Transaction）**就是把一组相关的SQL操作当作一个整体来执行，要么全部成功，要么全部失败，没有“只成功一部分”的情况。

如果事务中的某条SQL失败，**整个事务会回滚**，已经执行成功的操作也会被“撤销”，数据库恢复到事务开始前的状态。

这被称之为 事务的 **原子性（Atomicity）**



## 书写规范

1. SQL关键字通常用大写，比如建表用`CREATE`、 `TABLE`
   + 规范虽然允许小写关键字，但大写更清晰
2. 自己定义的表名、字段名用小写，比如`user`
3. 语句需要以`;`结尾
4. 如果表名或字段名不小心用了关键字，得用反引号将其进行包裹，避免冲突
   + 尽量别用关键字当表名或字段名。如果非要用，得用反引号将其包起来

总结一下就是 `关键字大写、自定义名称小写、语句末尾加分号、关键字命名用反引号`



## 安装

```shell
# 安装 mysql
# 会 同时安装 数据库软件「 服务端 」和 命令行工具 mysql「 客户端 」
brew install mysql

# 通过 homebrew 安装的 mysql 默认是无密码的，用户名为root
# 通过如下命令 设置 mysql的密码 「 mysql安装完成后，该命令会在控制台中被提示 」
# 该命令除了设置root密码外，还会进行一些额外配置，如移除测试数据test，是否禁止远程通过root登录数据库
# 禁止root通过远程登录后将无法通过ip地址形式访问数据库，从而尽可能避免黑客攻击，破解root密码
# 此时只能先通过ssh访问远程服务器，再进行数据库登录，此时才会被识别为本地登录「 即通过localhost进行登录 」
# 此设置只显示root用户「 管理员 」，不限制子用户「 普通用户 」。root依旧可以给子用户分配远程访问权限
 mysql_secure_installation # 对mysql进行安全加固

# 启动 mysql服务
# 即启动 mysql服务器，让命令行可以通过3306端口和其进行数据通信
brew services start mysql

# 停止 mysql服务
brew services stop mysql

# 查看 mysql 版本号 => 一般用于验证 mysql 安装是否成功
mysql --version # 9.3.0

# 登录 mysql => 通过 exit; 命令退出
mysql -u <用户名，如root> -p <登录密码>
```



```sql
# 1. SQL语句通常用分号（;）标识语句结束。在MySQL命令行或脚本中，分号一般不能省略。
# 2. 注释方式：
#    - 单行注释：--（标准SQL，推荐）或 #（MySQL扩展）
#    - 多行注释：/* ... */
#    - 注意：-- 注释后需有至少一个空格
#  -- 是SQL标准中的单行注释，# 是MySQL扩展的单行注释。为保证SQL的可移植性，优先推荐使用 --。
# 4. SQL中的关键字和字段名（列名）不区分大小写。
#  数据库名和表名在Unix/Linux下默认区分大小写，在Windows下默认不区分大小写「 行为可以通过对应参数进行调整 」
show databases;
```



```shell
mysql> show databases; # MySQL默认存在以下四个系统数据库，它们各自有专属的系统功能
+--------------------+
| Database           |
+--------------------+
| information_schema | # 存储数据库元数据的虚拟库，包括表、列、权限、字符集等结构信息
| mysql              | # 存储MySQL服务器的系统表，如用户、权限、时区等管理信息
| performance_schema | # 用于收集和监控MySQL服务器性能相关的统计和分析数据
| sys                | # 基于information_schema和performance_schema的辅助视图，便于性能和状态分析
+--------------------+
4 rows in set (0.014 sec)
```



## GUI

一般不在命令行进行sql操作，因为

1. 代码没高亮，容易写错
2. 换行麻烦，操作不方便
3. 没有自动补全和错误提示
4. 查询结果显示不够直观
5. 操作的SQL无法被单独保存，方便日后复用

所以我们一般通过 图形化工具来操作数据库，常见的有 Navicat 和 SQLYog

+ 对于 Navicat 而言

  + **Navicat for MySQL**：只支持 MySQL

  + **Navicat for PostgreSQL**：只支持 PostgreSQL

  + 。。。

  + **Navicat Premium**: 支持多种类型数据库，包括关系型数据、非关系型数据库和云数据库

+ 对于 SQLYog 而言，只能操作 MySQL。不能操作其他类型数据库

当然 vscode 等 IDE 也存在对应插件 可以直接IDE中以可视化方式操作 MySQL





双击连接名激活，Navicat 会列出 MySQL 里的数据库，

点开 music_db，能看到 t_singer 表，打开表查看数据或操作。

。Navicat里可以创建查询窗口，专门用来写和运行SQL语句。

在Navicat的“查询”里，右键选“新建查询”，会弹出一个标签页，专门用来写SQL语句

选中语句，右键“运行已选择的SQL语句”，就能看到当前数据库软件里的所有数据库。
